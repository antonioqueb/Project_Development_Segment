<odoo>
    <!-- Heredamos la vista kanban del proyecto -->
    <record id="view_project_kanban_inherit_custom" model="ir.ui.view">
        <field name="name">project.project.kanban.inherit.custom</field>
        <field name="model">project.project</field>
        <field name="inherit_id" ref="project.view_project_kanban"/>
        <field name="arch" type="xml">
            <!-- Insertamos nuestros campos adicionales después de campos relevantes -->
            
            <!-- Agregar nuestros campos después del campo 'open_task_count' -->
            <field name="open_task_count" position="after">
                <!-- Añadimos los nuevos campos calculados -->
                <field name="progress_percentage" widget="progressbar" options="{'max_value': 100}"/>
                <field name="burn_rate"/>
                <field name="completion_forecast"/>
            </field>

            <!-- Añadir campos adicionales en la parte de la izquierda, como las métricas de calidad -->
            <field name="rating_avg" position="after">
                <!-- Campos adicionales -->
                <field name="quality_index"/>
                <field name="risk_score"/>
            </field>

            <!-- Agregamos secciones personalizadas en el menú kanban -->
            <templates>
                <!-- Actualizamos el menú de la tarjeta kanban para mostrar las nuevas funcionalidades -->
                <t t-inherit="kanban-menu" position="inside">
                    <div class="col-6 o_kanban_card_manage_section o_kanban_manage_view">
                        <h5 role="menuitem" class="o_kanban_card_manage_title">
                            <span>Milestones</span>
                        </h5>
                        <div role="menuitem">
                            <a name="action_get_milestones" type="object">Manage Milestones</a>
                        </div>
                    </div>
                </t>

                <!-- Actualizamos la parte de la tarjeta de proyecto para mostrar nuestros nuevos campos -->
                <t t-inherit="kanban-box" position="inside">
                    <div class="o_kanban_card_content mw-100">
                        <div class="o_kanban_primary_left">
                            <div class="o_primary me-5">
                                <!-- Mostramos algunos de los campos adicionales dentro del contenido kanban -->
                                <span class="text-muted">
                                    <field name="sprint_goal"/>
                                </span>
                                <span class="text-muted">
                                    <field name="total_defects"/>
                                </span>
                                <span class="text-muted">
                                    <field name="client_satisfaction_score"/>
                                </span>
                            </div>
                        </div>
                    </div>
                </t>
            </templates>
        </field>
    </record>
</odoo>
